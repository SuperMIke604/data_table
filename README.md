# 数据管理扩展

一个 SillyTavern 扩展，用于在 wand menu 中添加"数据管理"和"数据预览"按钮，提供完整的数据管理功能。

## 功能

### 核心功能
- **数据管理按钮**：在 SillyTavern 的 wand menu（扩展菜单）中添加"数据管理"按钮
- **数据预览按钮**：在 wand menu 中添加"数据预览"按钮，用于预览聊天记录中的JSON数据
- **弹窗界面**：采用 iOS 扁平风格设计的现代化弹窗界面

### 功能模块

#### 1. 状态 & 操作
- 数据库状态显示
- 自动更新配置（更新频率、批处理大小、最大条目数）
- 标签和标记管理
- 自动更新开关
- 自动隐藏消息开关

#### 2. AI指令预设
- 对话轮次管理
- 预设保存和加载
- JSON模板导入/导出
- 默认配置恢复

#### 3. API & 连接
- 自定义API配置
- 酒馆连接预设支持
- 模型列表加载
- API连接测试
- 主API切换

#### 4. 世界书
- 数据注入目标选择
- 角色卡绑定世界书自动获取
- 手动选择世界书
- 世界书条目管理（启用/禁用）

#### 5. 数据管理
- 数据概览显示
- 数据导出（JSON格式）
- 设置导入/导出
- 模板可视化编辑
- 模板导入/导出/重置

#### 6. 数据预览
- 自动检测聊天记录中的JSON数据
- 表格化展示数据
- 支持多表数据预览

## 安装

1. 将扩展文件夹复制到 SillyTavern 的扩展目录：
   - 所有用户：`public/scripts/extensions/third-party/`
   - 当前用户：`data/<user-handle>/extensions/`

2. 在 SillyTavern 中刷新页面或重启应用

3. 在 wand menu 中应该能看到"数据管理"和"数据预览"按钮

## 文件结构

```
data_table/
├── manifest.json    # 扩展清单文件
├── index.js         # 主 JavaScript 文件
├── style.css        # iOS 扁平风格样式文件
├── README.md        # 说明文档
└── 参考文档.json    # 功能参考文档
```

## 使用说明

### 数据管理
1. 点击 wand menu 中的"数据管理"按钮
2. 在弹窗中选择相应的功能标签
3. 配置各项设置并保存
4. 设置会自动保存到本地存储

### 数据预览
1. 点击 wand menu 中的"数据预览"按钮
2. 系统会自动检测聊天记录中的JSON数据
3. 以表格形式展示数据内容

## 技术特性

- **iOS 扁平设计风格**：现代化的用户界面
- **响应式布局**：适配不同屏幕尺寸
- **本地存储**：配置自动保存到本地
- **API集成**：支持 SillyTavern 和 TavernHelper API
- **错误处理**：完善的错误提示和处理机制

## 开发

这是一个功能完整的扩展，包含以下技术实现：
- DOM 操作和事件处理
- 异步操作和 API 调用
- 本地存储管理
- 动态 UI 生成
- 样式和动画效果

## 许可证

待定

